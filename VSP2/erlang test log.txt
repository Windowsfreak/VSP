Erlang R14B03 (erts-5.8.4) [smp:4:4] [rq:4] [async-threads:0]

Eshell V5.8.4  (abort with ^G)
1> c(server).
./server.erl:17: Warning: variable 'BestEdge' is unused
{ok,server}
2> Pid = server:start().
<0.38.0>
3> Pid ! {initiate, 1, 1, sleeping, {2, node1, node2}}.
{initiate,1,1,sleeping,{2,node1,node2}}
skipping Source Edge: node1
send test to node3: {test,1,1,{3,node2,node3}}
send test to node4: {test,1,1,{4,node2,node4}}
send test to node5: {test,1,1,{1,node2,node5}}
Last edge processed, entering tail recursion...
entering receiveReport for node5 or substitute, returned data: {-1,false,[]}
4> Pid ! {reject, {1, node2, node5}}.
{reject,{1,node2,node5}}
leaving  receiveReport, received data: {-1,{1,node2,node5}}
entering receiveReport for node4 or substitute, returned data: {-1,false,
                                                                [{node5,1,
                                                                  rejected}]}
5> Pid ! {accept, {4, node2, node4}}.
{accept,{4,node2,node4}}
leaving  receiveReport, received data: {4,{4,node2,node4}}
entering receiveReport for node3 or substitute, returned data: {4,
                                                                {4,node2,
                                                                 node4},
                                                                [{node5,1,
                                                                  rejected}]}
6> Pid ! {accept, {3, node2, node3}}.
{accept,{3,node2,node3}}
leaving  receiveReport, received data: {3,{3,node2,node3}}
reporting best weight 3 to remote node node1: {report,3,{2,node1,node2}}
7> server:test(Pid).
[node2,
 [{node1,2,branch},
  {node3,3,basic},
  {node4,4,basic},
  {node5,1,rejected}],
 sleeping,1,1]
8> 